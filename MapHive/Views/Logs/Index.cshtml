@model MapHive.Models.DataGrid.DataGrid
@{
    ViewData["Title"] = "System Logs";
    
    // Prepare columns to display
    string[] columnsToDisplay = new[] { "Id", "Timestamp", "SeverityName", "Message", "UserName", "RequestPath" };
    ViewData["ColumnsToDisplay"] = columnsToDisplay;
}

<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="display-5">System Logs</h1>
            <p class="lead">View system logs for troubleshooting and audit purposes.</p>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Log Entries</h5>
                </div>
                <div class="card-body">
                    <partial name="_DataGrid" model="Model" />
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Update links for pagination to work without a form
            document.querySelectorAll('.pagination .page-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    if (this.hasAttribute('data-page')) {
                        e.preventDefault();
                        const page = this.getAttribute('data-page');
                        const currentUrl = new URL(window.location.href);
                        currentUrl.searchParams.set('page', page);
                        window.location.href = currentUrl.toString();
                    }
                });
            });
        });
    </script>
} 